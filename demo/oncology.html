<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oncology Interim Analysis - AdjuvantIQ Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,300;0,400;0,600;0,700;1,400&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Brand Colors */
        :root {
            --navy: #2c5282;
            --teal: #2d7d7d;
            --white: #ffffff;
            --warm-gray: #718096;
            --light-gray: rgba(113, 128, 150, 0.1);
        }
        
        body {
            font-family: 'Merriweather', serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fc;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Source Sans Pro', sans-serif;
            color: var(--navy);
        }
        
        .hero {
            background: linear-gradient(135deg, var(--navy) 0%, var(--teal) 100%);
            color: white;
            padding: 2.5rem 1.5rem;
            text-align: center;
        }
        
        .hero h1 {
            font-size: clamp(1.6rem, 3.5vw, 2.4rem);
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .hero .lead {
            font-size: clamp(0.95rem, 2.2vw, 1.15rem);
            margin-bottom: 1.5rem;
            opacity: 0.9;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .time-investment {
            background: rgba(255,255,255,0.1);
            padding: 1.25rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            font-size: 1em;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .progress-section {
            background: white;
            padding: 20px;
            border-bottom: 1px solid #ddd;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            background: #e0e0e0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress {
            background: linear-gradient(90deg, var(--teal), var(--navy));
            height: 100%;
            transition: width 0.3s ease;
            width: 75%;
        }
        
        .progress-text {
            font-weight: 600;
            color: var(--warm-gray);
        }
        
        .user-input {
            background: rgba(45, 125, 125, 0.1);
            border-left: 5px solid var(--teal);
            padding: 20px;
            margin: 15px 0;
            border-radius: 6px;
            position: relative;
        }
        
        .user-input::before {
            content: "👤 USER INPUT";
            position: absolute;
            top: -10px;
            left: 15px;
            background: var(--teal);
            color: white;
            padding: 4px 8px;
            font-size: 0.8em;
            font-weight: bold;
            border-radius: 3px;
        }
        
        .system-analysis {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 20px;
            margin: 15px 0;
            border-radius: 6px;
            position: relative;
        }
        
        .system-analysis::before {
            content: "🤖 SYSTEM ANALYSIS";
            position: absolute;
            top: -10px;
            left: 15px;
            background: #2196f3;
            color: white;
            padding: 4px 8px;
            font-size: 0.8em;
            font-weight: bold;
            border-radius: 3px;
        }
        
        .system-recommendations {
            background: #f3e5f5;
            border-left: 5px solid #9c27b0;
            padding: 20px;
            margin: 15px 0;
            border-radius: 6px;
            position: relative;
        }
        
        .system-recommendations::before {
            content: "💡 RECOMMENDATIONS";
            position: absolute;
            top: -10px;
            left: 15px;
            background: #9c27b0;
            color: white;
            padding: 4px 8px;
            font-size: 0.8em;
            font-weight: bold;
            border-radius: 3px;
        }
        
        .expert-decision {
            background: #e8f5e8;
            border-left: 5px solid #4caf50;
            padding: 20px;
            margin: 15px 0;
            border-radius: 6px;
            position: relative;
        }
        
        .expert-decision::before {
            content: "🎯 KEY DECISION";
            position: absolute;
            top: -10px;
            left: 15px;
            background: #4caf50;
            color: white;
            padding: 4px 8px;
            font-size: 0.8em;
            font-weight: bold;
            border-radius: 3px;
        }
        
        .reasoning-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .reasoning-box::before {
            content: "🔧 AI REASONING";
            position: absolute;
            top: -10px;
            left: 15px;
            background: #ff9800;
            color: white;
            padding: 4px 8px;
            font-size: 0.8em;
            font-weight: bold;
            border-radius: 3px;
        }
        
        .reasoning-box:hover {
            box-shadow: 0 4px 12px rgba(255,152,0,0.2);
        }
        
        .reasoning-box.expanded {
            background: #fff8e1;
        }
        
        .reasoning-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            color: #e65100;
        }
        
        .expand-icon {
            font-size: 1.2em;
            margin-left: auto;
            transition: transform 0.3s ease;
        }
        
        .reasoning-box.expanded .expand-icon {
            transform: rotate(45deg);
        }
        
        .reasoning-details {
            margin-top: 15px;
            display: none;
        }
        
        .reasoning-box.expanded .reasoning-details {
            display: block;
        }
        
        .workflow-step {
            opacity: 0.7;
            transform: translateY(20px) scale(0.95);
            transition: all 0.5s ease;
            padding: 1.25rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .workflow-step.in-view {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        
        .workflow-step.expanded {
            background: linear-gradient(135deg, #f8f9fc 0%, #e3f2fd 100%);
            transform: scale(1.02);
        }
        
        .content-section {
            background: white;
            margin: 1rem 0;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .section-header {
            background: #f8f9fc;
            padding: 1.5rem;
            border-bottom: 1px solid #e0e6ed;
        }
        
        .persona-card {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 5px solid #2196f3;
            padding: 1.25rem;
            margin: 1rem 0;
            border-radius: 8px;
        }
        
        .persona-title {
            font-size: 1.25em;
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 8px;
        }
        
        .workflow-step {
            padding: 1.5rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .workflow-step:last-child {
            border-bottom: none;
        }
        
        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .step-number {
            background: #2196f3;
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .step-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
        }
        
        .credibility-indicators {
            background: #f8f9fc;
            padding: 20px;
            margin: 30px 0;
            border-radius: 8px;
            border-left: 4px solid #9c27b0;
        }
        
        .expertise-note, .data-note {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .expertise-note .icon, .data-note .icon {
            font-size: 1.5em;
            margin-right: 15px;
        }
        
        .micro-feedback {
            background: #f0f8ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
            text-align: center;
        }
        
        .feedback-buttons button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .feedback-buttons button:hover {
            background: #1976d2;
        }
        
        .data-visualization {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .chart-placeholder {
            height: 200px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-style: italic;
            margin: 15px 0;
        }
        
        .engagement-tools {
            background: #e8f5e8;
            padding: 20px;
            margin: 30px 0;
            border-radius: 8px;
            text-align: center;
        }
        
        .engagement-tools button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 5px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .engagement-tools button:hover {
            background: #45a049;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 15px 20px;
            border-radius: 6px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1001;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        .back-link {
            display: inline-block;
            margin: 15px 0;
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            padding: 10px 16px;
            background: linear-gradient(135deg, #f8f9fc 0%, #e3f2fd 100%);
            border-radius: 6px;
            border: 2px solid #667eea;
            transition: all 0.3s ease;
            font-size: 1em;
        }
        
        .back-link:hover {
            color: #5a67d8;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            text-decoration: none;
        }
        
        /* Helper icon and popup */
        .helper-icon {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }
        
        .helper-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }
        
        .helper-popup {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 350px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            padding: 25px;
            z-index: 1001;
            display: none;
            border: 2px solid #667eea;
        }
        
        .helper-popup h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.2em;
        }
        
        .helper-item {
            margin: 12px 0;
        }
        
        .helper-example {
            padding: 10px;
            border-radius: 4px;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        .helper-example.user-input {
            background: #e8f5e8;
            border-left: 3px solid #4caf50;
        }
        
        .helper-example.system-analysis {
            background: #e3f2fd;
            border-left: 3px solid #2196f3;
        }
        
        .helper-example.system-recommendations {
            background: #f3e5f5;
            border-left: 3px solid #9c27b0;
        }
        
        .helper-example.expert-decision {
            background: #e8f5e8;
            border-left: 3px solid #4caf50;
        }
        
        .helper-example.reasoning-box {
            background: #fff3e0;
            border-left: 3px solid #ff9800;
        }
        
        .close-helper {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
        }
        
        .close-helper:hover {
            color: #333;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            padding: 1.5rem;
            max-width: 100%;
        }
        
        .team-member {
            background: #f8f9fc;
            border-radius: 8px;
            padding: 1rem;
            border-left: 4px solid #2196f3;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .team-member:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.2);
        }
        
        .team-member.expanded {
            grid-column: span 2;
            background: linear-gradient(135deg, #f8f9fc 0%, #e3f2fd 100%);
        }
        
        .member-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .member-name {
            font-size: 1.1em;
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 4px;
        }
        
        .expand-toggle {
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }
        
        .expand-toggle:hover {
            background: #1976d2;
            transform: scale(1.1);
        }
        
        .expand-toggle.expanded {
            transform: rotate(45deg);
        }
        
        .member-role {
            color: #666;
            font-size: 0.8em;
            margin-bottom: 8px;
        }
        
        .member-bio {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            margin-top: 8px;
            color: #555;
            font-size: 0.9em;
            line-height: 1.4;
        }
        
        .team-member.expanded .member-bio {
            max-height: 200px;
        }

        /* Section-level collapse functionality */
        .collapsible-section {
            margin: 2rem 0;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
            background: white;
        }
        
        .section-header {
            background: #f8f9fc;
            padding: 1.5rem;
            border-bottom: 1px solid #e0e6ed;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s ease;
        }
        
        .section-header:hover {
            background: #e3f2fd;
        }
        
        .section-header h3 {
            font-size: 1.5em;
            color: #333;
            margin: 0;
        }
        
        .section-toggle-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85em;
            color: #2196f3;
            font-weight: 500;
        }
        
        .section-toggle {
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .section-toggle:hover {
            background: #1976d2;
            transform: scale(1.1);
        }
        
        .section-toggle.collapsed {
            transform: rotate(180deg);
        }
        
        .section-content {
            max-height: 2000px;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }
        
        .section-content.collapsed {
            max-height: 0;
        }
        
        /* List view for collapsed sections */
        .section-list {
            padding: 1rem;
            background: #f8f9fc;
            border-top: 1px solid #e0e6ed;
        }
        
        .section-list.collapsed {
            display: block;
        }
        
        .section-list.expanded {
            display: none;
        }
        
        /* Compact horizontal layout for team members */
        .team-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: space-between;
        }
        
        .team-list-item {
            background: white;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            border-left: 3px solid #2196f3;
            font-size: 0.85em;
            font-weight: 500;
            color: #333;
            flex: 1;
            min-width: 200px;
            text-align: center;
        }
        
        /* Enhanced AI Reasoning box styling with EXPAND/COLLAPSE */
        .reasoning-box {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border: 2px solid #2d7d7d;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 4px 6px rgba(45, 125, 125, 0.1);
        }

        .reasoning-box:hover {
            box-shadow: 0 8px 15px rgba(45, 125, 125, 0.2);
            transform: translateY(-2px);
        }

        .reasoning-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #2c5282;
            margin-bottom: 0;
        }

        .section-toggle-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
            color: #2d7d7d;
        }

        .expand-icon {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2d7d7d;
            transition: transform 0.3s ease;
        }

        .reasoning-box.expanded .expand-icon {
            transform: rotate(45deg);
        }

        .reasoning-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            opacity: 0;
            margin-top: 0;
        }

        .reasoning-box.expanded .reasoning-details {
            max-height: 500px;
            opacity: 1;
            margin-top: 1rem;
        }
        
        /* Enhanced feedback box styling with red arrows and glow */
        .feedback-section {
            position: relative;
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            border-radius: 12px;
            border: 3px solid #e53e3e;
            box-shadow: 0 0 20px rgba(229, 62, 62, 0.3);
            animation: feedbackGlow 2s ease-in-out infinite alternate;
        }

        @keyframes feedbackGlow {
            0% { box-shadow: 0 0 20px rgba(229, 62, 62, 0.3); }
            100% { box-shadow: 0 0 30px rgba(229, 62, 62, 0.6); }
        }

        .feedback-section::before,
        .feedback-section::after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
            animation: arrowPulse 1.5s ease-in-out infinite;
        }

        .feedback-section::before {
            top: -15px;
            left: 50px;
            border-width: 0 15px 15px 15px;
            border-color: transparent transparent #e53e3e transparent;
        }

        .feedback-section::after {
            top: -15px;
            right: 50px;
            border-width: 0 15px 15px 15px;
            border-color: transparent transparent #e53e3e transparent;
        }

        @keyframes arrowPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .feedback-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #c53030;
            margin-bottom: 1rem;
            text-align: center;
        }

        .feedback-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            justify-content: center;
        }

        .feedback-button {
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(229, 62, 62, 0.3);
        }

        .feedback-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(229, 62, 62, 0.4);
            background: linear-gradient(135deg, #c53030 0%, #a52a2a 100%);
        }

        /* Enhanced micro-feedback styling */
        .micro-feedback {
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            border: 2px solid #e53e3e;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
            box-shadow: 0 4px 8px rgba(229, 62, 62, 0.2);
        }

        .micro-feedback::before {
            content: '💬';
            position: absolute;
            top: -10px;
            left: 20px;
            background: white;
            padding: 0 8px;
            font-size: 1.2rem;
        }

        .micro-feedback p {
            color: #c53030;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .micro-feedback .feedback-buttons {
            gap: 0.5rem;
        }

        .micro-feedback .feedback-buttons button {
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(229, 62, 62, 0.3);
        }

        .micro-feedback .feedback-buttons button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(229, 62, 62, 0.4);
            background: linear-gradient(135deg, #c53030 0%, #a52a2a 100%);
        }
    
        /* Centralized Demo Component Styles - Generated from CMS */

        /* Centralized Reasoning Box Styles */
        .reasoning-box {
            background: #fff3e0 !important;
            border: 2px solid #ff9800 !important;
            padding: 20px !important;
            margin: 15px 0 !important;
            border-radius: 8px !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            position: relative !important;
        }
        
        .reasoning-box:hover {
            box-shadow: 0 4px 12px rgba(255,152,0,0.2) !important;
        }
        
        .reasoning-box.expanded {
            background: #fff8e1 !important;
        }
        
        .reasoning-box::before {
            content: "🔧 AI REASONING" !important;
            position: absolute !important;
            top: -10px !important;
            left: 15px !important;
            background: #ff9800 !important;
            color: white !important;
            padding: 4px 8px !important;
            font-size: 0.8em !important;
            font-weight: bold !important;
            border-radius: 3px !important;
        }
        
        .reasoning-header {
            font-weight: bold !important;
            color: #e65100 !important;
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
        }
        
        .expand-icon {
            font-size: 1.2em !important;
            margin-left: auto !important;
            transition: transform 0.3s ease !important;
        }
        
        .reasoning-box.expanded .expand-icon {
            transform: rotate(45deg) !important;
        }
        
        .reasoning-details {
            margin-top: 15px !important;
            display: none !important;
        }
        
        .reasoning-box.expanded .reasoning-details {
            display: block !important;
        }
        /* Centralized Feedback Section Styles */
        .feedback-section {
            position: relative !important;
            margin: 2rem 0 !important;
            padding: 2rem !important;
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%) !important;
            border-radius: 12px !important;
            border: 3px solid #e53e3e !important;
            box-shadow: 0 0 20px rgba(229, 62, 62, 0.3) !important;
            animation: feedbackGlow 2s ease-in-out infinite alternate !important;
        }
        
        .feedback-title {
            text-align: center !important;
            font-size: 1.5em !important;
            color: #c53030 !important;
            margin-bottom: 1rem !important;
            font-weight: bold !important;
        }
        
        .feedback-buttons {
            display: flex !important;
            flex-wrap: wrap !important;
            gap: 1rem !important;
            justify-content: center !important;
            margin-top: 1.5rem !important;
        }
        
        .feedback-button {
            background: #e53e3e !important;
            color: white !important;
            border: none !important;
            padding: 0.75rem 1.5rem !important;
            border-radius: 8px !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            box-shadow: 0 4px 8px rgba(229, 62, 62, 0.3) !important;
        }
        
        .feedback-button:hover {
            background: #c53030 !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 12px rgba(229, 62, 62, 0.4) !important;
        }
        
        .feedback-section::before {
            content: "→" !important;
            position: absolute !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            font-size: 2rem !important;
            color: #e53e3e !important;
            font-weight: bold !important;
            animation: arrowPulse 1.5s ease-in-out infinite !important;
            left: -30px !important;
        }
        
        .feedback-section::after {
            content: "→" !important;
            position: absolute !important;
            top: 50% !important;
            transform: translateY(-50%) rotate(180deg) !important;
            font-size: 2rem !important;
            color: #e53e3e !important;
            font-weight: bold !important;
            animation: arrowPulse 1.5s ease-in-out infinite !important;
            right: -30px !important;
        }
        /* Centralized Collapsible Section Styles */
        .collapsible-section {
            margin: 2rem 0 !important;
            border-radius: 12px !important;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1) !important;
            overflow: hidden !important;
            background: white !important;
        }
        
        .section-header {
            background: #f8f9fc !important;
            padding: 1.5rem !important;
            border-bottom: 1px solid #e0e6ed !important;
            cursor: pointer !important;
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            transition: background 0.3s ease !important;
        }
        
        .section-header:hover {
            background: #e3f2fd !important;
        }
        
        .section-header h3 {
            font-size: 1.5em !important;
            color: #333 !important;
            margin: 0 !important;
        }
        
        .section-toggle-container {
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
            font-size: 0.85em !important;
            color: #2196f3 !important;
            font-weight: 500 !important;
        }
        
        .section-toggle {
            background: #2196f3 !important;
            color: white !important;
            border: none !important;
            border-radius: 50% !important;
            width: 32px !important;
            height: 32px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            cursor: pointer !important;
            font-size: 1em !important;
            transition: all 0.3s ease !important;
        }
        
        .section-toggle:hover {
            background: #1976d2 !important;
            transform: scale(1.1) !important;
        }
        
        .section-toggle.collapsed {
            transform: rotate(180deg) !important;
        }
        
        .section-content {
            max-height: 2000px !important;
            overflow: hidden !important;
            transition: max-height 0.5s ease !important;
        }
        
        .section-content.collapsed {
            max-height: 0 !important;
        }
        
        .section-list {
            padding: 1rem !important;
            background: #f8f9fc !important;
            border-top: 1px solid #e0e6ed !important;
        }
        /* Centralized Animation Keyframes */
        @keyframes feedbackGlow {
            0% {
                box-shadow: 0 0 20px rgba(229, 62, 62, 0.3);
            }
            100% {
                box-shadow: 0 0 30px rgba(229, 62, 62, 0.6);
            }
        }
        
        @keyframes arrowPulse {
            0%, 100% {
                opacity: 0.7;
                transform: translateY(-50%) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateY(-50%) scale(1.2);
            }
        }</style>
</head>
<body>
    <div class="hero">
        <div class="container">
            <a href="index.html" class="back-link">← Back to Demo Hub</a>
            <h1 id="demo-hero-title">Oncology Interim Analysis</h1>
            <p class="lead" id="demo-hero-subtitle">See how AI-assisted reasoning transforms complex interim analysis decisions</p>
            <div class="time-investment">
                <span id="time-investment-text">⏱️ 12-15 minutes • Real oncology trial scenario • Statistical analysis focus</span>
            </div>
        </div>
    </div>
    
    <!-- Helper icon -->
    <div class="helper-icon" onclick="toggleHelper()">❓</div>
    
    <!-- Helper popup -->
    <div class="helper-popup" id="helperPopup">
        <button class="close-helper" onclick="toggleHelper()">×</button>
        <h3>Content Guide</h3>
        <div class="helper-item">
            <div class="helper-example user-input">👤 <strong>USER INPUT</strong>: What clinical experts tell the system</div>
        </div>
        <div class="helper-item">
            <div class="helper-example system-analysis">🤖 <strong>SYSTEM ANALYSIS</strong>: AI agents processing and analyzing</div>
        </div>
        <div class="helper-item">
            <div class="helper-example system-recommendations">💡 <strong>RECOMMENDATIONS</strong>: System-generated optimization suggestions</div>
        </div>
        <div class="helper-item">
            <div class="helper-example expert-decision">🎯 <strong>KEY DECISION</strong>: Clinical expert's final choices (Green)</div>
        </div>
        <div class="helper-item">
            <div class="helper-example reasoning-box">🔧 <strong>AI REASONING</strong>: Click to see detailed explanations</div>
        </div>
    </div>

    <div class="progress-section">
        <div class="container">
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">Statistical Analysis Planning (1 of 4)</div>
        </div>
    </div>

    <div class="container">
        <div class="credibility-indicators">
            <div class="expertise-note">
                <span class="icon">🎓</span>
                <span>Developed with biostatisticians from Genentech, Roche, and leading oncology biotechs</span>
            </div>
            <div class="data-note">
                <span class="icon">📊</span>
                <span>Based on analysis of 25+ Phase II oncology biomarker trials and FDA guidance</span>
            </div>
        </div>

        <div class="content-section">
            <div class="section-header">
                <h2 id="trial-overview-title">Oncology Biomarker Trial Mid-Course Analysis</h2>
                <p id="trial-overview-description">Phase II dose-finding study showing mixed efficacy signals across dose levels and biomarker subgroups</p>
            </div>

            <div class="persona-card" id="persona-card">
                <div class="persona-title">Dr. Marcus Rodriguez, Chief Medical Officer</div>
                <p><strong>Company:</strong> Series B oncology biotech developing novel CDK4/6 inhibitor</p>
                <p><strong>Background:</strong> 15 years oncology drug development, former Genentech</p>
                <p><strong>Challenge:</strong> Phase II trial showing mixed results, needs data interpretation for go/no-go decision</p>
            </div>

            <div class="workflow-step" id="workflow-step-1">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <div class="step-title">Statistical Analysis Planning</div>
                </div>
                
                <div class="user-input">
                    <strong>Dr. Rodriguez's Input:</strong> "I need help interpreting our interim analysis results for our CDK4/6 inhibitor trial. We're seeing 23% ORR overall but big differences between dose levels and some interesting biomarker patterns. I want to understand if we should modify our enrollment strategy, adjust dose levels, or how to position this data for the FDA."
                </div>

                <div class="system-analysis">
                    <strong>System Initial Analysis:</strong><br>
                    • <strong>Trial Type Recognition:</strong> Phase II oncology biomarker study with interim analysis<br>
                    • <strong>Statistical Context:</strong> 60/120 patients analyzed, ORR primary endpoint<br>
                    • <strong>Historical Benchmarks:</strong> Previous CDK4/6 inhibitor trials (PALOMA-3, MONALEESA-3, MONARCH-2)<br>
                    • <strong>Regulatory Context:</strong> FDA oncology guidance for biomarker-driven development<br>
                    • <strong>Key Analysis Areas:</strong> Dose-response relationship, biomarker stratification, sample size adequacy
                </div>

                <div class="reasoning-box" onclick="toggleReasoning(this)">
                    <div class="reasoning-header">
                        How did the system analyze the interim results?
                        <div class="section-toggle-container">
                            <span>EXPAND</span>
                            <span class="expand-icon">+</span>
                        </div>
                    </div>
                    <div class="reasoning-details">
                        <strong>1. Study Design Mapping:</strong> Maps trial to oncology biomarker study ontology, identifies comparable historical trials<br><br>
                        <strong>2. Statistical Framework Activation:</strong> Engages statistical analysis agents for interim analysis interpretation, dose-response modeling<br><br>
                        <strong>3. Regulatory Pathway Assessment:</strong> Analyzes results against FDA guidance for oncology biomarker studies<br><br>
                        <strong>4. Historical Performance Comparison:</strong> Benchmarks 23% ORR against historical CDK4/6 inhibitor studies<br><br>
                        <strong>5. Decision Tree Preparation:</strong> Prepares multiple pathway options based on statistical interpretations
                    </div>
                </div>

                <div class="micro-feedback">
                    <p><strong>Quick reaction:</strong> How do you typically handle interim analysis decisions with mixed efficacy signals?</p>
                    <div class="feedback-buttons">
                        <button onclick="giveFeedback(this, 'collaborative')">Collaborative team analysis</button>
                        <button onclick="giveFeedback(this, 'consultants')">External statistical consultants</button>
                        <button onclick="giveFeedback(this, 'pi-judgment')">Principal investigator judgment</button>
                        <button onclick="giveFeedback(this, 'challenge')">This is a challenge for us</button>
                    </div>
                </div>
            </div>

            <div class="workflow-step" id="workflow-step-2">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <div class="step-title">Multi-Agent Statistical Analysis</div>
                </div>

                <div class="system-analysis">
                    <strong>Coordinated Agent Analysis Results:</strong><br><br>
                    <strong>📊 Statistical Analysis Agent:</strong> 23% ORR at interim (n=60) suggests potential efficacy signal; confidence interval 13-35% indicates need for larger sample<br><br>
                    <strong>🧬 Biomarker Stratification Agent:</strong> Strong signal in PIK3CA wild-type patients (35% ORR, n=25) vs. PIK3CA mutant (12% ORR, n=35)<br><br>
                    <strong>💊 Dose-Response Agent:</strong> Clear dose-response: 300mg (18% ORR), 450mg (28% ORR), 600mg (25% ORR with toxicity)<br><br>
                    <strong>⚖️ Regulatory Strategy Agent:</strong> Results support biomarker-driven registration; PIK3CA stratification enables accelerated approval pathway<br><br>
                    <strong>📈 Power Analysis Agent:</strong> 70% power for overall population, 85% power for PIK3CA wild-type subgroup with full enrollment<br><br>
                    <strong>🤖 AI Coordination Agent:</strong> Cross-validating findings across agents, identifying interdependencies between biomarker effects and dose optimization
                </div>

                <div class="reasoning-box" onclick="toggleReasoning(this)">
                    <div class="reasoning-header">
                        How do multiple AI agents coordinate statistical analysis?
                        <div class="section-toggle-container">
                            <span>EXPAND</span>
                            <span class="expand-icon">+</span>
                        </div>
                    </div>
                    <div class="reasoning-details">
                        <strong>1. Multi-Dimensional Integration:</strong> Coordinates statistical, biomarker, dose-response, and regulatory agents<br><br>
                        <strong>2. Historical Benchmarking:</strong> Compares results against 15 similar oncology biomarker trials<br><br>
                        <strong>3. Biomarker Effect Calculation:</strong> Uses PIK3CA data to calculate biomarker-specific effect sizes<br><br>
                        <strong>4. Dose Optimization Modeling:</strong> Applies modeling to identify optimal dose balancing efficacy/safety<br><br>
                        <strong>5. Regulatory Pathway Mapping:</strong> Maps results to FDA biomarker guidance for registration strategy
                    </div>
                </div>

                <div class="dashboard-link" style="text-align: center; margin: 20px 0;">
                    <button onclick="openDashboardModal()" 
                            style="display: inline-block; padding: 12px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                   color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;
                                   box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3); transition: all 0.3s ease;">
                        📊 View Full Analytics Dashboard
                    </button>
                </div>

                <div class="system-recommendations">
                    <strong>AI-Generated Strategic Recommendations:</strong><br><br>
                    <strong>🎯 Immediate Action:</strong> Pivot to PIK3CA wild-type enrichment strategy. Strong biomarker signal (p=0.031) supports regulatory differentiation and faster approval pathway.<br><br>
                    <strong>🏛️ FDA Engagement:</strong> Request pre-submission meeting to discuss biomarker strategy and Breakthrough Therapy Designation potential. 35% ORR exceeds typical BTD thresholds.<br><br>
                    <strong>📋 Protocol Amendment:</strong> Modify inclusion criteria to require PIK3CA wild-type status. Implement centralized biomarker testing to ensure 48-hour turnaround for screening.<br><br>
                    <strong>🏥 Site Optimization:</strong> Focus recruitment on high-volume sites with strong biomarker testing capabilities. Projected 2.8:1 screening ratio requires enhanced site support.<br><br>
                    <strong>⚔️ Competitive Positioning:</strong> Leverage biomarker differentiation vs. competitors pursuing biomarker-unselected approaches. Recent competitor Phase III failure validates strategy.
                </div>

                <div class="reasoning-box" onclick="toggleReasoning(this)">
                    <div class="reasoning-header">
                        How does the system generate strategic recommendations from statistical analysis?
                        <div class="section-toggle-container">
                            <span>EXPAND</span>
                            <span class="expand-icon">+</span>
                        </div>
                    </div>
                    <div class="reasoning-details">
                        <strong>1. Statistical Signal Interpretation:</strong> Analyzes p=0.031 biomarker effect and 35% ORR in wild-type population against FDA BTD thresholds<br><br>
                        <strong>2. Regulatory Pathway Optimization:</strong> Maps biomarker findings to FDA guidance for accelerated approval and Breakthrough Therapy Designation<br><br>
                        <strong>3. Risk-Benefit Assessment:</strong> Evaluates trade-offs between broader population enrollment vs. biomarker-selected approach<br><br>
                        <strong>4. Competitive Landscape Analysis:</strong> Considers recent competitor failures and market positioning opportunities<br><br>
                        <strong>5. Implementation Feasibility:</strong> Assesses practical requirements for protocol amendments, site capabilities, and biomarker testing infrastructure
                    </div>
                </div>

                <div class="micro-feedback">
                    <p><strong>Have you seen similar biomarker effects that changed your development strategy?</strong></p>
                    <div class="feedback-buttons">
                        <button onclick="giveFeedback(this, 'often-reshape')">Yes, biomarkers often reshape our trials</button>
                        <button onclick="giveFeedback(this, 'sometimes-cautious')">Sometimes, but we're cautious about subgroups</button>
                        <button onclick="giveFeedback(this, 'rarely-modify')">Rarely modify based on biomarker signals</button>
                        <button onclick="giveFeedback(this, 'avoid-biomarker')">We avoid biomarker-driven development</button>
                    </div>
                </div>
            </div>

            <div class="workflow-step" id="workflow-step-3">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <div class="step-title">Strategic Recommendations for Trial Modification</div>
                </div>

                <div class="system-recommendations">
                    <strong>Optimized Development Strategy Options:</strong><br><br>
                    <strong>🎯 Option A - Biomarker-Driven Pivot:</strong><br>
                    • Strategy: Modify enrollment to focus on PIK3CA wild-type patients only<br>
                    • Sample Size: 75 additional wild-type patients needed<br>
                    • Timeline: +6 months for biomarker screening and targeted recruitment<br>
                    • Advantage: 35% ORR in wild-type provides stronger regulatory position<br><br>
                    <strong>🚀 Option B - Dose Optimization Path:</strong><br>
                    • Strategy: Continue current enrollment, focus on 450mg dose level<br>
                    • Sample Size: Complete planned enrollment (60 additional patients)<br>
                    • Timeline: On track for completion in 8 months<br>
                    • Risk: Overall population may not meet regulatory threshold<br><br>
                    <strong>⚡ Option C - Accelerated Development:</strong><br>
                    • Strategy: Use interim data for FDA Breakthrough Therapy Designation in PIK3CA wild-type<br>
                    • Rationale: 35% ORR exceeds FDA expectations for BTD in this population<br>
                    • Advantage: Accelerated approval pathway, reduced Phase III requirements<br><br>
                    <strong>🤖 AI Strategy Agent:</strong> Recommending Option A based on highest probability of regulatory success (78%) and competitive positioning analysis
                </div>

                <div class="reasoning-box" onclick="toggleReasoning(this)">
                    <div class="reasoning-header">
                        How does the system generate strategic recommendations?
                        <div class="section-toggle-container">
                            <span>EXPAND</span>
                            <span class="expand-icon">+</span>
                        </div>
                    </div>
                    <div class="reasoning-details">
                        <strong>1. Multi-Scenario Optimization:</strong> Evaluates 50+ protocol modification scenarios considering biomarker stratification and regulatory pathways<br><br>
                        <strong>2. Risk-Benefit Quantification:</strong> Models trade-offs between broader population vs. biomarker-selected approaches<br><br>
                        <strong>3. Regulatory Pathway Simulation:</strong> Uses FDA guidance to simulate approval pathways and success probability<br><br>
                        <strong>4. Competitive Integration:</strong> Factors in competitive CDK4/6 inhibitor timelines and market positioning<br><br>
                        <strong>5. Economic Impact Modeling:</strong> Calculates NPV impact of different strategies
                    </div>
                </div>

                <div class="micro-feedback">
                    <p><strong>Which strategic approach resonates most with your development philosophy?</strong></p>
                    <div class="feedback-buttons">
                        <button onclick="giveFeedback(this, 'biomarker-pivot')">Biomarker-driven pivot for stronger efficacy</button>
                        <button onclick="giveFeedback(this, 'dose-optimization')">Dose optimization with broader population</button>
                        <button onclick="giveFeedback(this, 'accelerated-regulatory')">Accelerated regulatory strategy</button>
                        <button onclick="giveFeedback(this, 'more-analysis')">Need more risk-benefit analysis</button>
                    </div>
                </div>
            </div>

            <div class="workflow-step" id="workflow-step-4">
                <div class="step-header">
                    <div class="step-number">4</div>
                    <div class="step-title">Expert Decision & Adaptive Monitoring</div>
                </div>

                <div class="expert-decision">
                    <strong>Dr. Rodriguez's Decision:</strong><br>
                    "This analysis is incredibly helpful. I'm leaning toward the biomarker-driven pivot. The 35% ORR in PIK3CA wild-type patients is compelling, and the regulatory pathway advantages make sense. Let's model what the modified trial would look like and prepare for FDA discussion about the biomarker strategy."
                </div>

                <div class="system-analysis">
                    <strong>Updated Trial Projections Based on Decision:</strong><br>
                    • <strong>Modified Population:</strong> PIK3CA wild-type HR+/HER2- metastatic breast cancer<br>
                    • <strong>Updated Sample Size:</strong> 95 total patients (60 current + 35 additional)<br>
                    • <strong>Revised Timeline:</strong> 14 months total (6 additional months for targeted recruitment)<br>
                    • <strong>Statistical Power:</strong> 90% power to detect 30% ORR vs. 15% historical control<br>
                    • <strong>Budget Impact:</strong> +$3.2M for extended recruitment and biomarker screening<br>
                    • <strong>Commercial Advantage:</strong> Clear differentiation, potentially faster approval
                </div>

                <div class="reasoning-box" onclick="toggleReasoning(this)">
                    <div class="reasoning-header">
                        How does the system learn and adapt from this decision?
                        <div class="section-toggle-container">
                            <span>EXPAND</span>
                            <span class="expand-icon">+</span>
                        </div>
                    </div>
                    <div class="reasoning-details">
                        <strong>1. Decision Impact Propagation:</strong> Updates all trial projections based on biomarker-driven strategy<br><br>
                        <strong>2. Recruitment Feasibility Modeling:</strong> Assesses PIK3CA wild-type patient availability across site network<br><br>
                        <strong>3. Regulatory Documentation Prep:</strong> Generates FDA pre-submission meeting outline and BTD application components<br><br>
                        <strong>4. Risk Mitigation Planning:</strong> Identifies recruitment and biomarker testing logistics challenges<br><br>
                        <strong>5. Organizational Learning:</strong> Updates company biomarker development preferences for future trials
                    </div>
                </div>

                <div class="micro-feedback">
                    <p><strong>Which aspect of this data interpretation process would be most valuable for your organization?</strong></p>
                    <div class="feedback-buttons">
                        <button onclick="giveFeedback(this, 'statistical-analysis')">Statistical analysis and interpretation support</button>
                        <button onclick="giveFeedback(this, 'biomarker-guidance')">Biomarker stratification guidance</button>
                        <button onclick="giveFeedback(this, 'regulatory-optimization')">Regulatory pathway optimization</button>
                        <button onclick="giveFeedback(this, 'competitive-intelligence')">Competitive intelligence integration</button>
                        <button onclick="giveFeedback(this, 'all-above')">All of the above</button>
                    </div>
                </div>
            </div>
        </div>



        <!-- Team Section -->
        <div class="collapsible-section">
            <div class="section-header" onclick="toggleSection('team-section')">
                <h3>Meet the Team</h3>
                <div class="section-toggle-container">
                    <span>EXPAND</span>
                    <button class="section-toggle collapsed" id="team-toggle">▲</button>
                </div>
            </div>
            <div class="section-list collapsed" id="team-list">
                <div class="team-list">
                    <div class="team-list-item">Dr. Sarah Chen - VP Clinical Development</div>
                    <div class="team-list-item">Michael Rodriguez - Director of Clinical Operations</div>
                    <div class="team-list-item">Dr. Jennifer Walsh - Study Director</div>
                    <div class="team-list-item">Dr. Patricia Kim - Regulatory Affairs Director</div>
                </div>
            </div>
            <div class="section-content collapsed" id="team-section">
                <div class="team-grid" id="team-grid">
                    <div class="team-member">
                        <div class="member-name">Dr. Sarah Chen</div>
                        <div class="member-role">VP Clinical Development</div>
                        <p>Leading the trial design and strategic planning. Former Genentech, 15 years oncology experience.</p>
                        <div class="member-challenge">
                            <strong>Challenge:</strong> Design Phase III CV outcomes trial that improves on EMPA-REG timeline while maintaining regulatory strength
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="member-name">Michael Rodriguez</div>
                        <div class="member-role">Director of Clinical Operations</div>
                        <p>Managing site selection, recruitment, and trial execution. Expert in global trial management.</p>
                        <div class="member-challenge">
                            <strong>Challenge:</strong> Optimize site portfolio for maximum recruitment efficiency and data quality
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="member-name">Dr. Jennifer Walsh</div>
                        <div class="member-role">Study Director</div>
                        <p>Overseeing day-to-day trial execution and adaptive modifications. Former FDA reviewer.</p>
                        <div class="member-challenge">
                            <strong>Challenge:</strong> Manage recruitment delays and emerging safety signals while maintaining trial integrity
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="member-name">Dr. Patricia Kim</div>
                        <div class="member-role">Regulatory Affairs Director</div>
                        <p>Leading regulatory strategy and submission preparation. 20 years regulatory experience.</p>
                        <div class="member-challenge">
                            <strong>Challenge:</strong> Optimize FDA pathway and prepare for potential advisory committee review
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="engagement-tools">
            <h3>Found this valuable? Take the next step:</h3>
            <button onclick="downloadOncologyGuide()">📄 Download Statistical Analysis Guide</button>
            <button onclick="shareOncologyInsights()">📤 Share This Demo</button>
            <button onclick="openPilotForm()">🚀 Discuss Data Analysis Pilot</button>

            <p>This demonstration shows how AdjuvantIQ transforms complex statistical analysis and biomarker interpretation for oncology trials.</p>
            <button onclick="window.location.href='index.html'">🏠 Return to Demo Hub</button>
            <button onclick="window.location.href='cardiovascular.html'">📋 Explore End-to-End Demo</button>
            <button onclick="downloadPhaseAnalysis('oncology')">📄 Download Oncology Analysis</button>
        </div>

        <!-- Overall Demo Feedback Section -->
        <div class="feedback-section">
            <h3 class="feedback-title">Your Feedback Matters!</h3>
            <p>Help us improve our oncology analysis capabilities by sharing your thoughts on this demo.</p>
            <div class="feedback-buttons">
                <button class="feedback-button" onclick="showToast('Thank you for your feedback!')">👍 Great Demo!</button>
                <button class="feedback-button" onclick="showToast('We appreciate your feedback!')">👎 Could be better</button>
                <button class="feedback-button" onclick="showToast('Thank you for your feedback!')">💡 Suggestion</button>
            </div>
        </div>
    </div>

    <!-- Dashboard Modal -->
    <div id="dashboardModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; 
                                    background-color: rgba(0,0,0,0.5); backdrop-filter: blur(5px);">
        <div style="position: relative; background-color: white; margin: 2% auto; padding: 0; width: 95%; max-width: 1200px; 
                    height: 90%; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); overflow: hidden;">
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; 
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h3 style="margin: 0;">📊 CDK4/6 Inhibitor Trial - Interim Analysis Dashboard</h3>
                <button onclick="closeDashboardModal()" style="background: none; border: none; color: white; font-size: 24px; 
                                                                 cursor: pointer; padding: 5px;">&times;</button>
            </div>
            <iframe id="dashboardFrame" src="./CDK4%3A6%20Inhibitor%20Trial%20-%20Interim%20Analysis%20Dashboard.html" 
                    style="width: 100%; height: calc(100% - 80px); border: none;"></iframe>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // Simple, working JavaScript
        let startTime = Date.now();
        
        // Toggle reasoning boxes
        function toggleReasoning(element) {
            element.classList.toggle('expanded');
            const icon = element.querySelector('.expand-icon');
            const textSpan = element.querySelector('.section-toggle-container span:first-child');
            
            if (element.classList.contains('expanded')) {
                icon.textContent = '−';
                textSpan.textContent = 'COLLAPSE';
            } else {
                icon.textContent = '+';
                textSpan.textContent = 'EXPAND';
            }
        }
        
        // Simple feedback functionality with logging
        function giveFeedback(button, feedbackType) {
            // Visual feedback
            button.style.background = 'linear-gradient(135deg, #4caf50 0%, #45a049 100%)';
            button.style.transform = 'scale(1.05)';
            button.textContent = '✓ Thank you!';
            
            // Disable other buttons in the same group
            const siblings = button.parentElement.querySelectorAll('button');
            siblings.forEach(function(btn) {
                if (btn !== button) {
                    btn.disabled = true;
                    btn.style.opacity = '0.5';
                }
            });
            
            // Log feedback with timestamp and page info
            const feedbackData = {
                type: feedbackType,
                page: 'oncology',
                step: getCurrentStep(),
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                url: window.location.href
            };
            
            console.log('Feedback logged:', feedbackData);
            
            // Store feedback in localStorage for retrieval
            const existingFeedback = JSON.parse(localStorage.getItem('adjuvantiq_feedback') || '[]');
            existingFeedback.push(feedbackData);
            localStorage.setItem('adjuvantiq_feedback', JSON.stringify(existingFeedback));
            
            showToast('Thank you for your feedback!');
            console.log('Feedback:', feedbackType);
            
            // Reset button after delay
            setTimeout(() => {
                button.style.background = '';
                button.style.transform = '';
                button.textContent = button.getAttribute('data-original-text') || 'Feedback';
            }, 3000);
        }
        
        // Get current step for feedback tracking
        function getCurrentStep() {
            const progressText = document.getElementById('progressText');
            return progressText ? progressText.textContent : 'unknown';
        }
        
        // Function to retrieve all feedback (for admin use)
        function retrieveAllFeedback() {
            const feedback = localStorage.getItem('adjuvantiq_feedback');
            console.log('=== FEEDBACK RETRIEVAL ===');
            console.log('All Feedback:', JSON.parse(feedback || '[]'));
            return JSON.parse(feedback || '[]');
        }
        
        // Show toast notifications
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(function() {
                toast.classList.remove('show');
            }, 3000);
        }

        // Dashboard Modal Functions
        function openDashboardModal() {
            document.getElementById('dashboardModal').style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeDashboardModal() {
            document.getElementById('dashboardModal').style.display = 'none';
            document.body.style.overflow = 'auto'; // Restore scrolling
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('dashboardModal');
            if (event.target === modal) {
                closeDashboardModal();
            }
        }

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeDashboardModal();
            }
        });
        
        // Progressive disclosure on scroll
        window.addEventListener('scroll', function() {
            const steps = document.querySelectorAll('.workflow-step');
            steps.forEach(function(step) {
                const rect = step.getBoundingClientRect();
                if (rect.top < window.innerHeight * 0.8) {
                    step.classList.add('in-view');
                }
            });
            
            // Update progress bar
            const scrollTop = window.pageYOffset;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = Math.min((scrollTop / docHeight) * 100, 100);
            
            document.getElementById('progressBar').style.width = scrollPercent + '%';
        });
        
        // Toggle helper popup
        function toggleHelper() {
            console.log('toggleHelper called');
            const popup = document.getElementById('helperPopup');
            console.log('popup element:', popup);
            if (popup.style.display === 'none' || popup.style.display === '') {
                popup.style.display = 'block';
                console.log('showing popup');
            } else {
                popup.style.display = 'none';
                console.log('hiding popup');
            }
        }
        
        // Download oncology guide
        function downloadOncologyGuide() {
            showToast('Oncology analysis guide download coming soon! Contact us for detailed materials.');
        }
        
        // Share oncology insights
        function shareOncologyInsights() {
            const url = window.location.href;
            const title = 'AdjuvantIQ Demo: Biostatistics & Analytics for Oncology Biomarker Trial';
            const text = 'Check out this demo of AI-powered oncology biomarker analysis and statistical interpretation.';
            
            if (navigator.share) {
                navigator.share({
                    title: title,
                    text: text,
                    url: url
                });
            } else {
                navigator.clipboard.writeText(url).then(function() {
                    showToast('Demo URL copied to clipboard! Share with your colleagues.');
                });
            }
        }
        
        // Open pilot form
        function openPilotForm() {
            window.open('../#pilot', '_blank');
            showToast('Opening pilot application form...');
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Oncology demo loaded successfully');
            showToast('Welcome! Explore how AI processes complex oncology trial data.');
            loadOncologyDemoContent();
        });
        
        // Load oncology demo content from CMS
        async function loadOncologyDemoContent() {
            try {
                const response = await fetch('../content/demo-oncology.json');
                const content = await response.json();
                
                // Update hero section
                if (content.hero) {
                    const heroTitle = document.getElementById('demo-hero-title');
                    const heroSubtitle = document.getElementById('demo-hero-subtitle');
                    const timeInvestment = document.getElementById('time-investment-text');
                    if (heroTitle) heroTitle.textContent = content.hero.title;
                    if (heroSubtitle) heroSubtitle.textContent = content.hero.subtitle;
                    if (timeInvestment) timeInvestment.textContent = content.hero.time_investment;
                }
                
                // Update trial overview
                if (content.trial_overview) {
                    const overviewTitle = document.getElementById('trial-overview-title');
                    const overviewDescription = document.getElementById('trial-overview-description');
                    if (overviewTitle) overviewTitle.textContent = content.trial_overview.title;
                    if (overviewDescription) overviewDescription.textContent = content.trial_overview.description;
                    
                    // Update persona card
                    if (content.trial_overview.persona) {
                        const personaCard = document.getElementById('persona-card');
                        if (personaCard) {
                            personaCard.innerHTML = `
                                <div class="persona-title">${content.trial_overview.persona.name}</div>
                                <p><strong>Company:</strong> ${content.trial_overview.persona.company}</p>
                                <p><strong>Background:</strong> ${content.trial_overview.persona.background}</p>
                                <p><strong>Challenge:</strong> ${content.trial_overview.persona.challenge}</p>
                            `;
                        }
                    }
                }
                
                // Update analysis phases
                if (content.analysis_phases) {
                    content.analysis_phases.forEach((phase, index) => {
                        const stepElement = document.getElementById(`workflow-step-${index + 1}`);
                        if (stepElement) {
                            // Update step title
                            const stepTitle = stepElement.querySelector('.step-title');
                            if (stepTitle) stepTitle.textContent = phase.title;
                            
                            // Update content based on phase type
                            if (phase.type === 'user_input' && phase.content) {
                                const userInput = stepElement.querySelector('.user-input');
                                if (userInput) userInput.innerHTML = `<strong>${phase.persona_name}'s Input:</strong> "${phase.content}"`;
                            }
                            
                            if (phase.type === 'system_analysis' && phase.content) {
                                const systemAnalysis = stepElement.querySelector('.system-analysis');
                                if (systemAnalysis) systemAnalysis.innerHTML = `<strong>${phase.analysis_title}:</strong><br>${phase.content}`;
                            }
                            
                            if (phase.type === 'recommendations' && phase.options) {
                                const recommendations = stepElement.querySelector('.system-recommendations');
                                if (recommendations) {
                                    recommendations.innerHTML = `<strong>${phase.title}:</strong><br><br>${phase.options.map(option => 
                                        `<strong>${option.icon} ${option.title}:</strong><br>${option.description}<br><br>`
                                    ).join('')}`;
                                }
                            }
                            
                            if (phase.type === 'expert_decision' && phase.decision) {
                                const expertDecision = stepElement.querySelector('.expert-decision');
                                if (expertDecision) expertDecision.innerHTML = `<strong>${phase.persona_name}'s Decision:</strong><br>"${phase.decision}"`;
                            }
                        }
                    });
                }
                
            } catch (error) {
                console.log('Oncology demo content loaded from CMS');
            }
        }

        // Toggle member details
        function toggleMemberDetails(button) {
            const member = button.closest('.team-member');
            const bio = member.querySelector('.member-bio');
            const expandToggle = button;

            if (bio.style.maxHeight === '0px' || bio.style.maxHeight === '') {
                bio.style.maxHeight = '200px'; // Show full bio
                expandToggle.textContent = '▲';
                expandToggle.classList.add('expanded');
                member.classList.add('expanded');
            } else {
                bio.style.maxHeight = '0px'; // Hide full bio
                expandToggle.textContent = '▼';
                expandToggle.classList.remove('expanded');
                member.classList.remove('expanded');
            }
        }
        
        // Section-level collapse functionality
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const list = document.getElementById(sectionId.replace('-section', '-list'));
            const toggle = document.getElementById(sectionId.replace('-section', '-toggle'));
            const expandText = toggle.parentElement.querySelector('span');
            
            if (section.classList.contains('collapsed')) {
                // Expand section
                section.classList.remove('collapsed');
                list.classList.remove('collapsed');
                list.classList.add('expanded');
                toggle.textContent = '▼';
                toggle.classList.remove('collapsed');
                expandText.textContent = 'COLLAPSE';
            } else {
                // Collapse section
                section.classList.add('collapsed');
                list.classList.add('collapsed');
                list.classList.remove('expanded');
                toggle.textContent = '▲';
                toggle.classList.add('collapsed');
                expandText.textContent = 'EXPAND';
            }
        }
        
        // Enhanced feedback functionality
        function giveFeedback(button, feedbackType) {
            // Visual feedback
            button.style.background = '#38a169';
            button.textContent = '✓ Thank You!';
            button.disabled = true;
            
            // Show success message
            showToast('Thank you for your feedback! We appreciate your input.');
            
            // Reset after 3 seconds
            setTimeout(() => {
                button.style.background = '#e53e3e';
                button.textContent = button.getAttribute('data-original-text') || 'Feedback';
                button.disabled = false;
            }, 3000);
        }
        
        // Auto-collapse sections when scrolling
        let autoCollapseTimer;
        
        function setupAutoCollapse() {
            // Auto-collapse sections after 5 seconds of inactivity
            document.addEventListener('scroll', () => {
                clearTimeout(autoCollapseTimer);
                autoCollapseTimer = setTimeout(() => {
                    autoCollapseAll();
                }, 5000);
            });
        }
        
        function autoCollapseAll() {
            // Collapse all expanded sections
            const sectionsToCollapse = ['team-section'];
            
            sectionsToCollapse.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                const list = document.getElementById(sectionId.replace('-section', '-list'));
                const toggle = document.getElementById(sectionId.replace('-section', '-toggle'));
                const expandText = toggle.parentElement.querySelector('span');
                
                if (section && !section.classList.contains('collapsed') && toggle && list) {
                    section.classList.add('collapsed');
                    list.classList.add('collapsed');
                    list.classList.remove('expanded');
                    toggle.textContent = '▲';
                    toggle.classList.add('collapsed');
                    expandText.textContent = 'EXPAND';
                }
            });
        }
        
        // Initialize auto-collapse
        document.addEventListener('DOMContentLoaded', function() {
            setupAutoCollapse();
        });
    </script>
</body>
</html> 